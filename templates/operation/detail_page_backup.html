{% extends "base.html" %}
{% load staticfiles %}

{% block body_block %}
{% load humanize %}
{% load mathfilters %}

<div class="content-header row">
  <div class="content-header-left col-md-6 col-12 mb-2">
    <h3 class="content-header-title">{{ project_detail.project_code }}</h3>
  </div>
  <div class="content-header-right col-md-6 col-12">
    <div class="btn-group float-md-right" role="group" aria-label="Edit Options">
      <button class="btn btn-info round dropdown-toggle dropdown-menu-right box-shadow-2 px-2" id="btnGroupDrop1" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="ft-settings icon-left"></i> Actions
      </button>
      <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
          <a class="dropdown-item" href="{% url 'admin:operation_project_change' project_detail.id %}"  target="_blank">Update Project</a>
          <a class="dropdown-item" href="{% url 'admin:operation_report_add'%}"  target="_blank">New Daily Report</a>
          <a class="dropdown-item" href="{% url 'admin:operation_reporting_add'%}"  target="_blank">Upload Reports</a>
      </div>
    </div>
  </div>
</div>

<section class="row">
    <div class="col-lg-4 col-12">
        <div class="card pull-up bg-primary">
            <div class="card-content">
                <div class="card-body">
                    <div class="media d-flex">
                        <div class="media-body text-left">
                            <h4 class="white">{{ project_detail.project_detail }}</h4>
                        </div>
                        <div>
                            <i class="icon-basket-loaded info font-large-2 float-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card bg-success">
            <div class="card-content">
                <div class="card-body">
                    <div class="media d-flex">
                        <div class="media-body text-white text-left">
                            <h1 class="text-white">{{ total_personnel }}</h1>
                            <span>AIP Personnel</span>
                        </div>
                        <div class="align-self-center">
                            <i class="la la-users text-white font-large-3 float-right " data-toggle="modal" data-target="#manpower"></i>
                        </div>

            			<div class="modal fade text-left" id="manpower" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
						  <div class="modal-dialog modal-lg" role="document">
							<div class="modal-content">
							  <div class="modal-header bg-warning">
								<h4 class="modal-title" id="myModalLabel1">Basic Modal</h4>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								  <span aria-hidden="true">&times;</span>
								</button>
							  </div>
							  <div class="modal-body">
                                {% for personnel in aip_personnel %}
                                    <a href="{% url 'workforce:profile_detail' pk=personnel.base_profile.id %}" target="_blank" class="media border-0">
                                        <div class="media-left pr-1">
                                            <span class="avatar avatar-md avatar-online"><img class="media-object rounded-circle" src="{{ personnel.base_profile.profile_pic.url }}" alt="No image">
                                                <i></i>
                                            </span>
                                        </div>
                                        <div class="media-body w-100">
                                            <h5 class="list-group-item-heading">{{ personnel.base_profile.fullname }}</h5>
                                            <p class="list-group-item-text mb-0"><span class="badge badge-warning">{{ personnel.designation }}</span></p>
                                        </div>
                                    </a>
                                    <hr>
                                {% endfor %}
                              </div>
							  <div class="modal-footer">
								<button type="button" class="btn grey btn-outline-secondary" data-dismiss="modal">Close</button>
							  </div>
							</div>
						  </div>
						</div>

                    </div>
                </div>
            </div>
        </div>

        <div class="card bg-warning">
            <div class="card-content">
                <div class="card-body">
                    <div class="media d-flex">
                        <div class="media-body text-white text-left">
                            <h1 class="text-white">{{ total_units }}</h1>
                            <span>AIP Units</span>
                        </div>
                        <div class="align-self-center">
                            <i class="la la-truck text-white font-large-3 float-right" data-toggle="modal" data-target="#units"></i>
                        </div>

                        <div class="modal fade text-left" id="units" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
						  <div class="modal-dialog modal-lg" role="document">
							<div class="modal-content">
							  <div class="modal-header bg-warning">
								<h4 class="modal-title" id="myModalLabel1">Basic Modal</h4>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								  <span aria-hidden="true">&times;</span>
								</button>
							  </div>
							  <div class="modal-body">
                                {% for car in aip_units %}
                                    <a href="{% url 'fleet:unit_detail' pk=car.id %}" target="_blank" class="media border-0">
                                        <div class="media-left pr-1">
                                            <span class="avatar avatar-md avatar-online"><img class="media-object rounded-circle" src="{{ car.profile_pic.url }}" alt="No image">
                                                <i></i>
                                            </span>
                                        </div>
                                        <div class="media-body w-100">
                                            <h5 class="list-group-item-heading">{{ car.body_no }}</h5>
                                            <p class="list-group-item-text mb-0">
                                                <span class="badge badge-primary">{{ car.operator }}</span>
                                                <span class="badge {% if car.status == 'Idle' %}badge-warning{% else %}badge-success{% endif %} ml-1">{{ car.status }}</span>
                                            </p>
                                        </div>
                                    </a>
                                    <hr>
                                {% endfor %}
                              </div>
							  <div class="modal-footer">
								<button type="button" class="btn grey btn-outline-secondary" data-dismiss="modal">Close</button>
							  </div>
							</div>
						  </div>
						</div>

                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="col-lg-8 col-12">
      <div class="card pull-up">
         <div class="card-head">
            <div class="card-header">
               <h4 class="card-title">Stats</h4>
               <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                <div class="heading-elements">
                    <ul class="list-inline mb-0">
                        <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                    </ul>
                </div>
            </div>
         </div>
         <!-- project-info -->
         <div id="project-info" class="card-body row">
            <div class="project-info-count col-lg-4 col-md-12">
               <div class="project-info-icon border-success border-2">
                  <h3>P{{ project_detail.detail.contract_cost|intword }}</h3>
               </div>
               <div class="project-info-text pt-1">
                  <h5>Project Cost</h5>
               </div>
            </div>
            <div class="project-info-count col-lg-4 col-md-12">
               <div class="project-info-icon border-success border-2">
                  <h3>P{{ latest_expense.total|intcomma }}</h3>
               </div>
               <div class="project-info-text pt-1">
                  <h5>Overall Expense</h5>
               </div>
            </div>
            <div class="project-info-count col-lg-4 col-md-12">
               <div class="project-info-icon border-success border-2">
                  <h3>P{{ latest_billing.bill_sum|intword|default_if_none:"0.00" }}</h3>
               </div>
               <div class="project-info-text pt-1">
                  <h5>Total Billing</h5>
               </div>
            </div>

         </div>
         <!-- project-info -->
         <div class="card-body">
            <div class="card-subtitle line-on-side text-muted text-center font-small-3 mx-2 my-1">
               <span>Overall Progress & Slippage</span>
            </div>
            <div class="row py-2">
               <div class="col-lg-6 col-md-12">
                  <div class="media d-flex">
                        <div class="media-body text-left">
                            <h1 class="info">{{ latest_report.actual }}%</h1>
                            <h4>Project Overall Progress</h4>
                        </div>
                        <div>
                            <i class="icon-basket-loaded info font-large-2 float-right"></i>
                        </div>
                    </div>
                    <div class="progress progress-lg mt-1 mb-0 box-shadow-2">
                        <div class="progress-bar bg-gradient-x-info" role="progressbar" style="width: {{ latest_report.actual }}%" aria-valuenow="{{ latest_report.actual }}" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
               </div>
               <div class="col-lg-6 col-md-12">
                  <div class="media d-flex">
                        <div class="media-body text-left">
                            <h1 class="danger">{{ latest_report.slippage }}%</h1>
                            <h4>Project Slippage</h4>
                        </div>
                        <div>
                            <i class="icon-basket-loaded info font-large-2 float-right"></i>
                        </div>
                    </div>
                    <div class="progress progress-lg mt-1 mb-0 box-shadow-2">
                        <div class="progress-bar bg-gradient-x-danger" role="progressbar" style="width: {{ latest_report.slippage }}%" aria-valuenow="{{ latest_report.slippage }}" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
               </div>
            </div>
         </div>
      </div>
    </div>
</section>

<section class="row">
    <div class="col-12">
        <div class="card">
        <div class="card-content">
            <div class="card-body">
              <div class="row">
                <div class="col-lg-3 col-12">
                  License:<h2 class="danger">{{ project_detail.detail.license }}</h2>
                </div>
                <div class="col-lg-3 col-12">
                  Project ID:<h2 class="danger">{{ project_detail.detail.project_id }}</h2>
                </div>
                <div class="col-lg-3 col-12">
                  Proceed Date:<h2 class="danger">{{ project_detail.detail.proceed_date }}</h2>
                </div>
                <div class="col-lg-3 col-12">
                  Expiry Date:<h2 class="danger">{{ project_detail.detail.expiry_date }}</h2>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-3 col-12">
                  Implementing Office:<h2 class="danger">{{ project_detail.detail.implementing_office }}</h2>
                </div>
                <div class="col-lg-3 col-12">
                  Award Date:<h2 class="danger">{{ project_detail.detail.award_date }}</h2>
                </div>
                <div class="col-lg-3 col-12">
                  Effectivity Date:<h2 class="danger">{{ project_detail.detail.effectivity_date }}</h2>
                </div>
                <div class="col-lg-3 col-12">
                  Duration/Extension:<h2 class="danger">{{ project_detail.detail.contract_duration }}/{{ project_detail.detail.time_extension }}</h2>
                </div>
              </div>
            </div>
        </div>
        </div>
    </div>
</section>

<section class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Project Status</h4>
                <a class="heading-elements-toggle"><i class="la la-ellipsis font-medium-3"></i></a>
                <div class="heading-elements">
                    <ul class="list-inline mb-0">
                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                    </ul>
                </div>
            </div>
            <div class="card-content collapse show">
                <div class="card-body">
                    <div id="swa_container" style="widht: 100%, height: 100%"></div>
                    <script src="https://code.highcharts.com/highcharts.src.js"></script>
                    <script>
                        Highcharts.chart('swa_container', {
                            chart: {
                                type: 'line'
                            },
                            title: {
                                text: ''
                            },
                            xAxis: {
                                categories: [
                                    {% for work in project_detail.work.all %}
                                        '{{ work.date.month }}/{{ work.date.day }}/{{ work.date.year }}'
                                    {% if not forloop.last %}, {% endif %}
                                    {% endfor %}
                                    ]
                            },
                            yAxis: {
                                title: {
                                    text: 'Work Done (%)'
                                }
                            },
                            plotOptions: {
                                line: {
                                    dataLabels: {
                                        enabled: true
                                    },
                                    enableMouseTracking: true
                                }
                            },
                            series: [{
                                name: 'Actual',
                                data: [
                                    {% for work in project_detail.work.all %}
                                        {{ work.actual }}
                                    {% if not forloop.last %}, {% endif %}
                                    {% endfor %}
                                    ]
                            }, {
                                name: 'As Planned',
                                data: [
                                    {% for work in project_detail.work.all %}
                                        {{ work.planned }}
                                    {% if not forloop.last %}, {% endif %}
                                    {% endfor %}
                                    ]
                            }, {
                                name: 'Slippage',
                                data: [
                                    {% for work in project_detail.work.all %}
                                        {{ work.slippage }}
                                    {% if not forloop.last %}, {% endif %}
                                    {% endfor %}
                                    ]
                            }]
                        }).reflow();
                    </script>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Budget vs. Spending as of {{ latest_expense.date }}</h4>
                <a class="heading-elements-toggle"><i class="la la-ellipsis font-medium-3"></i></a>
                <div class="heading-elements">
                    <ul class="list-inline mb-0">
                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                    </ul>
                </div>
            </div>
            <div class="card-content collapse show">
                <div class="card-body pl-0 ml-0">
                    <div id="spider_container"></div>
                    <script src="https://code.highcharts.com/highcharts.src.js"></script>
                    <script src="https://code.highcharts.com/highcharts-more.js"></script>
                    <script>
                        Highcharts.chart('spider_container', {

                            chart: {
                                polar: true,
                                type: 'line',
                            },

                            title: {
                                text: 'Vat: P{{ latest_expense.vat|intcomma }} | Total: P{{ latest_expense.total|intcomma }}',
                            },

                            pane: {
                                size: '95%'
                            },

                            xAxis: {
                                categories: ['Materials','Equipment','Labor','Overhead','General & Admin','Drawings'],
                                tickmarkPlacement: 'on',
                                lineWidth: 0
                            },

                            yAxis: {
                                gridLineInterpolation: 'polygon',
                                lineWidth: 0,
                                min: 0
                            },

                            tooltip: {
                                shared: true,
                                pointFormat: '<span style="color:{series.color}">{series.name}: <b>${point.y:,.0f}</b><br/>'
                            },

                            series: [{
                                name: 'Allocated Budget',
                                data: [
                                    {{ allocated_expense.materials }},
                                    {{ allocated_expense.equipment }},
                                    {{ allocated_expense.labor }},
                                    {{ allocated_expense.overhead }},
                                    {{ allocated_expense.admin }},
                                    {{ allocated_expense.drawings }}
                                    ],
                                pointPlacement: 'on',
                                fillColor: '#ff00ff',
                                color: '#ff00ff',
                                fillOpacity: 0.8
                            }, {
                                name: 'Actual Spending',
                                data: [
                                    {{ latest_expense.materials }},
                                    {{ latest_expense.equipment }},
                                    {{ latest_expense.labor }},
                                    {{ latest_expense.overhead }},
                                    {{ latest_expense.admin }},
                                    {{ latest_expense.drawings }}
                                    ],
                                pointPlacement: 'on'
                            }],
                        });
                    </script>
                </div>
            </div>
        </div>

    </div>
</section>

<section class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">Ganntt Chart</h4>
                <a class="heading-elements-toggle"><i class="la la-ellipsis font-medium-3"></i></a>
                <div class="heading-elements">
                    <ul class="list-inline mb-0">
                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                    </ul>
                </div>
            </div>
            <div class="card-content collapse show">
                <div class="card-body">
                    <div id="test_container"></div>
                    <script src="https://code.highcharts.com/highcharts.js"></script>
                    <script src="https://code.highcharts.com/gantt/modules/gantt.js"></script>
                    <script>
                        Highcharts.ganttChart('test_container', {
                            title: {
                                text: ''
                            },

                            navigator: {
                                    enabled: true,
                                    liveRedraw: true,
                                    series: {
                                        type: 'gantt',
                                        pointPlacement: 0.5,
                                        pointPadding: 0.25
                                    },
                                    yAxis: {
                                        min: 0,
                                        max: 3,
                                        reversed: true,
                                        categories: [
                                            {% for work in project_items.all %}
                                                '{{ work.item }}'
                                            {% if not forloop.last %}, {% endif %}
                                            {% endfor %}
                                        ],
                                    }
                                },
                                scrollbar: {
                                    enabled: true
                                },
                                rangeSelector: {
                                    enabled: true,
                                    selected: 0
                                },

                            series: [{
                                name: 'Details',
                                data: [ {% for work in project_items.all %}
                                            {
                                        	id: '{{ work.sequence|safe }}',
                                            name: '{{ work.item|safe }}',
                                            start: Date.UTC({{ work.start_year }},{{ work.start_month }},{{ work.start_day }}),
                                            end: Date.UTC({{ work.end_year }},{{ work.end_month }},{{ work.end_day }}),
                                            completed: {{ work.actual_work|div:100|safe }},
                                            dependency: '{{ work.dependency|safe }}'
                                            }
                                        {% if not forloop.last %}, {% endif %}
                                        {% endfor %}]
                            }]
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="row">
    <div class="col-12">
        <div class="card">
         <div class="card-body">
			<ul class="nav nav-tabs nav-underline nav-justified">
				<li class="nav-item">
					<a class="nav-link active" id="linkIconOpt11-tab1" data-toggle="tab" href="#items" aria-controls="linkIconOpt11"><i class="ft-external-link"></i> Items of Work</a>
				</li>
				<li class="nav-item">
				<a class="nav-link" id="activeIcon12-tab1" data-toggle="tab" href="#reports" aria-controls="activeIcon12" aria-expanded="true"><i class="ft-calendar"></i> Daily Reports</a>
				</li>
				<li class="nav-item">
				<a class="nav-link" id="linkIcon12-tab1" data-toggle="tab" href="#reporting" aria-controls="linkIcon12" aria-expanded="false"><i class="ft-link"></i> Scheduled Reports</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" id="linkIconOpt11-tab1" data-toggle="tab" href="#billing" aria-controls="linkIconOpt11"><i class="ft-bold"></i> Billing</a>
				</li>
			</ul>
			<div class="tab-content px-1 pt-1">
				<div class="tab-pane active" id="items" role="tabpanel" aria-labelledby="dropdownOptIcon21-tab1" aria-expanded="false">
                    <div class="table-responsive">
                        <table class="table table-hover table-middle table-xl mb-0">
                            <thead>
                                <tr>
                                    <th class="border-top-0">Item No.</th>
                                    <th class="border-top-0">Category</th>
                                    <th class="border-top-0">Description</th>
                                    <th class="border-top-0">Amount</th>
                                    <th class="border-top-0">Work Done (%)</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for work in project_detail.project_item.all %}
                                <tr>
                                    <td class="text-truncate"><strong>{{ work.item.item_no }}</strong></td>
                                    <td class="text-truncate"><strong>{{ work.item.category }}</strong></td>
                                    <td>{{ work.item }}</td>
                                    <td>{{ work.amount|intcomma }}</td>
                                    <td class='danger'>{{ work.actual_work }}%</td>

                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
				</div>
				<div role="tabpanel" class="tab-pane" id="reports" aria-labelledby="activeIcon12-tab1" aria-expanded="true">

            		<div class="col-12">
            		    {% for report in top_reports.all reversed %}
                		    {% if report.weather == 'Rainy' %}
                            <div class="card mb-0">
                                <div class="card-content">
                                    <div class="weather-date position-relative">
                                        <div class="date-info position-absolute bg-blue bg-lighten-1 white mt-1 p-1 text-center">
                                            <span class="date block">{{ report.date|date:'D' }}</span>
                                            <span class="month">{{ report.date|date:'M d' }}</span>
                                        </div>
                                    </div>
                                    <div class="card-body bg-blue bg-lighten-4 rounded-top">
                                        <div class="animated-weather-icons text-center float-left mt-0 ml-1">
                                            <svg version="1.1" id="cloudDrizzleAlt1" class="climacon climacon_cloudDrizzleAlt climacon-blue climacon-darken-2 height-150" viewBox="15 20 80 80">
                                                <g class="climacon_iconWrap climacon_iconWrap-cloudDrizzleAlt">
                                                    <g class="climacon_wrapperComponent climacon_wrapperComponent-drizzle">
                                                        <path class="climacon_component climacon_component-stroke climacon_component-stroke_drizzle climacon_component-stroke_drizzle-left" id="Drizzle-Left_1_1" d="M56.969,57.672l-2.121,2.121c-1.172,1.172-1.172,3.072,0,4.242c1.17,1.172,3.07,1.172,4.24,0c1.172-1.17,1.172-3.07,0-4.242L56.969,57.672z"></path>
                                                        <path class="climacon_component climacon_component-stroke climacon_component-stroke_drizzle climacon_component-stroke_drizzle-middle" d="M50.088,57.672l-2.119,2.121c-1.174,1.172-1.174,3.07,0,4.242c1.17,1.172,3.068,1.172,4.24,0s1.172-3.07,0-4.242L50.088,57.672z"></path>
                                                        <path class="climacon_component climacon_component-stroke climacon_component-stroke_drizzle climacon_component-stroke_drizzle-right" d="M43.033,57.672l-2.121,2.121c-1.172,1.172-1.172,3.07,0,4.242s3.07,1.172,4.244,0c1.172-1.172,1.172-3.07,0-4.242L43.033,57.672z"></path>
                                                    </g>
                                                    <g class="climacon_wrapperComponent climacon_wrapperComponent-cloud">
                                                        <path class="climacon_component climacon_component-stroke climacon_component-stroke_cloud" d="M59.943,41.642c-0.696,0-1.369,0.092-2.033,0.205c-2.736-4.892-7.961-8.203-13.965-8.203c-8.835,0-15.998,7.162-15.998,15.997c0,5.992,3.3,11.207,8.177,13.947c0.276-1.262,0.892-2.465,1.873-3.445l0.057-0.057c-3.644-2.061-6.106-5.963-6.106-10.445c0-6.626,5.372-11.998,11.998-11.998c5.691,0,10.433,3.974,11.666,9.29c1.25-0.81,2.732-1.291,4.332-1.291c4.418,0,8,3.581,8,7.999c0,3.443-2.182,6.371-5.235,7.498c0.788,1.146,1.194,2.471,1.222,3.807c4.666-1.645,8.014-6.077,8.014-11.305C71.941,47.014,66.57,41.642,59.943,41.642z"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                        <div class="weather-details">
                                            <h3 class="block blue darken-2 m-0">Activities: </h3>
                                            <span>{{ report.activity }}</span>
                                            <h3 class="block blue darken-2 mt-1 m-0">Issues:</h3>
                                            <span>{{ report.issues }}</span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% elif report.weather == 'Sunny' %}
                            <div class="card mb-0">
                                <div class="card-content">
                                    <div class="weather-date position-relative">
                                        <div class="date-info position-absolute bg-blue-grey bg-lighten-3 white mt-1 p-1 text-center">
                                            <span class="date block">{{ report.date|date:'D' }}</span>
                                            <span class="month">{{ report.date|date:'M d' }}</span>
                                        </div>
                                    </div>
                                    <div class="card-body bg-blue-grey bg-lighten-4 rounded-top">
                                        <div class="animated-weather-icons text-center float-left mt-0 ml-1">
                                            <svg version="1.1" id="cloudSunFill" class="climacon climacon_cloudSunFill climacon-blue-grey climacon-darken-2 height-150" viewBox="15 20 80 80">
                                                <g class="climacon_iconWrap climacon_cloudSunFill-iconWrap">
                                                  <g class="climacon_componentWrap climacon_componentWrap-sun climacon_componentWrap-sun_cloud">
                                                    <g class="climacon_componentWrap climacon_componentWrap_sunSpoke">
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M80.029,43.611h-3.998c-1.105,0-2-0.896-2-1.999s0.895-2,2-2h3.998c1.104,0,2,0.896,2,2S81.135,43.611,80.029,43.611z"></path>
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M72.174,30.3c-0.781,0.781-2.049,0.781-2.828,0c-0.781-0.781-0.781-2.047,0-2.828l2.828-2.828c0.779-0.781,2.047-0.781,2.828,0c0.779,0.781,0.779,2.047,0,2.828L72.174,30.3z"></path>
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M58.033,25.614c-1.105,0-2-0.896-2-2v-3.999c0-1.104,0.895-2,2-2c1.104,0,2,0.896,2,2v3.999C60.033,24.718,59.135,25.614,58.033,25.614z"></path>
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M43.892,30.3l-2.827-2.828c-0.781-0.781-0.781-2.047,0-2.828c0.78-0.781,2.047-0.781,2.827,0l2.827,2.828c0.781,0.781,0.781,2.047,0,2.828C45.939,31.081,44.673,31.081,43.892,30.3z"></path>
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M42.033,41.612c0,1.104-0.896,1.999-2,1.999h-4c-1.104,0-1.998-0.896-1.998-1.999s0.896-2,1.998-2h4C41.139,39.612,42.033,40.509,42.033,41.612z"></path>
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M43.892,52.925c0.781-0.78,2.048-0.78,2.827,0c0.781,0.78,0.781,2.047,0,2.828l-2.827,2.827c-0.78,0.781-2.047,0.781-2.827,0c-0.781-0.78-0.781-2.047,0-2.827L43.892,52.925z"></path>
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M58.033,57.61c1.104,0,2,0.895,2,1.999v4c0,1.104-0.896,2-2,2c-1.105,0-2-0.896-2-2v-4C56.033,58.505,56.928,57.61,58.033,57.61z"></path>
                                                      <path class="climacon_component climacon_component-stroke climacon_component-stroke_sunSpoke climacon_component-stroke_sunSpoke-north" d="M72.174,52.925l2.828,2.828c0.779,0.78,0.779,2.047,0,2.827c-0.781,0.781-2.049,0.781-2.828,0l-2.828-2.827c-0.781-0.781-0.781-2.048,0-2.828C70.125,52.144,71.391,52.144,72.174,52.925z"></path>
                                                    </g>
                                                    <g class="climacon_wrapperComponent climacon_wrapperComponent-sunBody">
                                                      <circle class="climacon_component climacon_component-stroke climacon_component-stroke_sunBody" cx="58.033" cy="41.612" r="11.999"></circle>
                                                      <circle class="climacon_component climacon_component-fill climacon_component-fill_sunBody" fill="#FFFFFF" cx="58.033" cy="41.612" r="7.999"></circle>
                                                    </g>
                                                  </g>
                                                  <g class="climacon_wrapperComponent climacon_wrapperComponent-cloud">
                                                    <path class="climacon_component climacon_component-stroke climacon_component-stroke_cloud" d="M44.033,65.641c-8.836,0-15.999-7.162-15.999-15.998c0-8.835,7.163-15.998,15.999-15.998c6.006,0,11.233,3.312,13.969,8.203c0.664-0.113,1.338-0.205,2.033-0.205c6.627,0,11.998,5.373,11.998,12c0,6.625-5.371,11.998-11.998,11.998C57.26,65.641,47.23,65.641,44.033,65.641z"></path>
                                                    <path class="climacon_component climacon_component-fill climacon_component-fill_cloud" fill="#FFFFFF" d="M60.035,61.641c4.418,0,8-3.582,8-7.998c0-4.418-3.582-8-8-8c-1.6,0-3.082,0.481-4.334,1.291c-1.23-5.316-5.976-9.29-11.668-9.29c-6.627,0-11.999,5.372-11.999,11.999c0,6.627,5.372,11.998,11.999,11.998C47.65,61.641,57.016,61.641,60.035,61.641z"></path>
                                                  </g>
                                                </g>
                                            </svg>
                                        </div>
                                        <div class="weather-details">
                                            <h3 class="block blue-grey darken-2 m-0">Activities: </h3>
                                            <span>{{ report.activity }}</span>
                                            <h3 class="block blue-grey darken-2 mt-1 m-0">Issues:</h3>
                                            <span>{{ report.issues }}</span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% elif report.weather == 'Stormy' %}
                            <div class="card mb-0">
                                <div class="card-content">
                                    <div class="weather-date position-relative">
                                        <div class="date-info position-absolute bg-blue-grey bg-lighten-2 white mt-1 p-1 text-center">
                                            <span class="date block">{{ report.date|date:'D' }}</span>
                                            <span class="month">{{ report.date|date:'M d' }}</span>
                                        </div>
                                    </div>
                                    <div class="card-body bg-blue-grey bg-lighten-4 rounded-top">
                                        <div class="animated-weather-icons text-center float-left mt-0 ml-1">
                                            <svg version="1.1" id="cloudHailAlt2" class="climacon climacon_cloudHailAlt climacon-blue-grey climacon-darken-2 height-150" viewBox="15 20 80 80">
                                                <g class="climacon_iconWrap climacon_iconWrap-cloudHailAlt">
                                                    <g class="climacon_wrapperComponent climacon_wrapperComponent-hailAlt">
                                                        <g class="climacon_component climacon_component-stroke climacon_component-stroke_hailAlt climacon_component-stroke_hailAlt-left">
                                                            <circle cx="42" cy="65.498" r="2"></circle>
                                                        </g>
                                                        <g class="climacon_component climacon_component-stroke climacon_component-stroke_hailAlt climacon_component-stroke_hailAlt-middle">
                                                            <circle cx="49.999" cy="65.498" r="2"></circle>
                                                        </g>
                                                        <g class="climacon_component climacon_component-stroke climacon_component-stroke_hailAlt climacon_component-stroke_hailAlt-right">
                                                            <circle cx="57.998" cy="65.498" r="2"></circle>
                                                        </g>
                                                        <g class="climacon_component climacon_component-stroke climacon_component-stroke_hailAlt climacon_component-stroke_hailAlt-left">
                                                            <circle cx="42" cy="65.498" r="2"></circle>
                                                        </g>
                                                        <g class="climacon_component climacon_component-stroke climacon_component-stroke_hailAlt climacon_component-stroke_hailAlt-middle">
                                                            <circle cx="49.999" cy="65.498" r="2"></circle>
                                                        </g>
                                                        <g class="climacon_component climacon_component-stroke climacon_component-stroke_hailAlt climacon_component-stroke_hailAlt-right">
                                                            <circle cx="57.998" cy="65.498" r="2"></circle>
                                                        </g>
                                                    </g>
                                                    <g class="climacon_wrapperComponent climacon_wrapperComponent-cloud">
                                                        <path class="climacon_component climacon_component-stroke climacon_component-stroke_cloud" d="M63.999,64.941v-4.381c2.39-1.384,3.999-3.961,3.999-6.92c0-4.417-3.581-8-7.998-8c-1.602,0-3.084,0.48-4.334,1.291c-1.23-5.317-5.974-9.29-11.665-9.29c-6.626,0-11.998,5.372-11.998,11.998c0,3.549,1.55,6.728,3.999,8.924v4.916c-4.776-2.768-7.998-7.922-7.998-13.84c0-8.835,7.162-15.997,15.997-15.997c6.004,0,11.229,3.311,13.966,8.203c0.663-0.113,1.336-0.205,2.033-0.205c6.626,0,11.998,5.372,11.998,12C71.998,58.863,68.656,63.293,63.999,64.941z"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                        <div class="weather-details">
                                            <h3 class="block blue-grey darken-3 m-0">Activities: </h3>
                                            <span>{{ report.activity }}</span>
                                            <h3 class="block blue-grey darken-3 mt-1 m-0">Issues:</h3>
                                            <span>{{ report.issues }}</span>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            {% else %}
                            <div class="card mb-0">
                                <div class="card-content">
                                    <div class="weather-date position-relative">
                                        <div class="date-info position-absolute bg-amber bg-lighten-1 white mt-1 p-1 text-center">
                                            <span class="date block">{{ report.date|date:'D' }}</span>
                                            <span class="month">{{ report.date|date:'M d' }}</span>
                                        </div>
                                    </div>
                                    <div class="card-body bg-amber bg-lighten-4 rounded-top">
                                        <div class="animated-weather-icons text-center float-left mt-0 ml-1">
                                            <svg version="1.1" id="wind1" class="climacon climacon_wind climacon-amber climacon-darken-2 height-150" viewBox="15 20 80 80">
                                                <g class="climacon_iconWrap climacon_iconWrap-wind">
                                                    <g class="climacon_wrapperComponent climacon_componentWrap-wind">
                                                        <path
                                                        class="climacon_component climacon_component-stroke climacon_component-wind climacon_component-wind_curl"
                                                        d="M65.999,52L65.999,52h-3c-1.104,0-2-0.895-2-1.999c0-1.104,0.896-2,2-2h3c1.104,0,2-0.896,2-1.999c0-1.105-0.896-2-2-2s-2-0.896-2-2s0.896-2,2-2c0.138,0,0.271,0.014,0.401,0.041c3.121,0.211,5.597,2.783,5.597,5.959C71.997,49.314,69.312,52,65.999,52z"/>
                                                        <path
                                                            class="climacon_component climacon_component-stroke climacon_component-wind"
                                                            d="M55.999,48.001h-2h-6.998H34.002c-1.104,0-1.999,0.896-1.999,2c0,1.104,0.895,1.999,1.999,1.999h2h3.999h3h4h3h3.998h2c3.313,0,6,2.688,6,6c0,3.176-2.476,5.748-5.597,5.959C56.271,63.986,56.139,64,55.999,64c-1.104,0-2-0.896-2-2c0-1.105,0.896-2,2-2s2-0.896,2-2s-0.896-2-2-2h-2h-3.998h-3h-4h-3h-3.999h-2c-3.313,0-5.999-2.686-5.999-5.999c0-3.175,2.475-5.747,5.596-5.959c0.131-0.026,0.266-0.04,0.403-0.04l0,0h12.999h6.998h2c1.104,0,2-0.896,2-2s-0.896-2-2-2s-2-0.895-2-2c0-1.104,0.896-2,2-2c0.14,0,0.272,0.015,0.403,0.041c3.121,0.211,5.597,2.783,5.597,5.959C61.999,45.314,59.312,48.001,55.999,48.001z"/>
                                                    </g>
                                                </g>
                                            </svg>
                                        </div>
                                        <div class="weather-details">
                                            <h3 class="block amber darken-2 m-0">Activities:</h3>
                                            <span>{{ report.activity }}</span>
                                            <h3 class="block amber darken-4 mt-1 m-0">Issues:</h3>
                                            <span>{{ report.issues }}</span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>

				</div>
				<div class="tab-pane" id="reporting" role="tabpanel" aria-labelledby="linkIcon12-tab1" aria-expanded="false">

                    <h3>Project Log Sheet</h3>
				    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-middle dataex-html5-selectors">
                        <thead>
                            <tr>
                                <th>Date </th>
                                <th>Type</th>
                                <th>Remarks</th>
                                <th>Document</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for report in pls %}
				            <tr>
				                <td class="text-bold-600 primary text-truncate">
				                        {{ report.date }}
				                </td>
				                <td class="text-truncate">{{ report.report_type }}</td>
				                <td>{{ report.remarks }}</td>
                                <td><a href="{{ report.document.url }}" target="_blank"><i class="la la-file-pdf-o font-medium-3"></i></a></td>
				            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    </div>

                    <h3>Project Monitor</h3>
				    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-middle dataex-html5-selectors">
                        <thead>
                            <tr>
                                <th>Date </th>
                                <th>Type</th>
                                <th>Remarks</th>
                                <th>Document</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for report in pm %}
				            <tr>
				                <td class="text-bold-600 primary text-truncate">
				                        {{ report.date }}
				                </td>
				                <td class="text-truncate">{{ report.report_type }}</td>
				                <td>{{ report.remarks }}</td>
                                <td><a href="{{ report.document.url }}" target="_blank"><i class="la la-file-pdf-o font-medium-3"></i></a></td>
				            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    </div>

                    <h3>Statement of Work Accomplished</h3>
				    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-middle dataex-html5-selectors">
                        <thead>
                            <tr>
                                <th>Date </th>
                                <th>Type</th>
                                <th>Remarks</th>
                                <th>Document</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for report in swa %}
				            <tr>
				                <td class="text-bold-600 primary text-truncate">
				                        {{ report.date }}
				                </td>
				                <td class="text-truncate">{{ report.report_type }}</td>
				                <td>{{ report.remarks }}</td>
                                <td><a href="{{ report.document.url }}" target="_blank"><i class="la la-file-pdf-o font-medium-3"></i></a></td>
				            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    </div>

                    <h3>Straight Line Diagram</h3>
				    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-middle dataex-html5-selectors">
                        <thead>
                            <tr>
                                <th>Date </th>
                                <th>Type</th>
                                <th>Remarks</th>
                                <th>Document</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for report in sld %}
				            <tr>
				                <td class="text-bold-600 primary text-truncate">
				                        {{ report.date }}
				                </td>
				                <td class="text-truncate">{{ report.report_type }}</td>
				                <td>{{ report.remarks }}</td>
                                <td><a href="{{ report.document.url }}" target="_blank"><i class="la la-file-pdf-o font-medium-3"></i></a></td>
				            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    </div>

                    <h3>Geotagged Pictures</h3>
				    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-middle dataex-html5-selectors">
                        <thead>
                            <tr>
                                <th>Date </th>
                                <th>Type</th>
                                <th>Remarks</th>
                                <th>Document</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for report in geo %}
				            <tr>
				                <td class="text-bold-600 primary text-truncate">
				                        {{ report.date }}
				                </td>
				                <td class="text-truncate">{{ report.report_type }}</td>
				                <td>{{ report.remarks }}</td>
                                <td><a href="{{ report.document.url }}" target="_blank"><i class="la la-file-pdf-o font-medium-3"></i></a></td>
				            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    </div>


				</div>
				<div class="tab-pane" id="billing" role="tabpanel" aria-labelledby="dropdownOptIcon22-tab1" aria-expanded="false">
                    <div class="table-responsive">
                        <table class="table table-hover table-middle table-xl mb-0">
                            <thead>
                                <tr>
                                    <th class="border-top-0">Title</th>
                                    <th class="border-top-0">Amount Billed</th>
                                    <th class="border-top-0">Status</th>
                                    <th class="border-top-0">Attachments</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for bill in project_detail.billing.all %}
                                <tr>
                                    <td class="text-truncate">
                                        <div><strong>{{ bill.title }}</strong></div>
                                        <div>Date: {{ bill.date }}</div>
                                    </td>
                                    <td><div><h2 class="danger">P{{ bill.amount|intcomma }}</h2></div></td>
                                    <td>{{ bill.status }}</td>
                                    <td>
                                        <a {% if bill.document %}href="{{ bill.document.url }}"{% endif %}><i class="la la-file font-large-1 info"></i></a>
                                        <a href="{{ bill.image.url }}"><i class="la la-money font-large-1 info"></i></a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
				</div>
			</div>
         </div>
        </div>
    </div>
</section>

{% endblock %}































